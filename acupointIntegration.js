/*
 * 模組：穴位庫地圖整合 (Enhanced Version)
 * 本檔案定義了穴位座標資料與地圖初始化函式。
 * 
 * 修正記錄：
 * 1. 增強字串匹配：自動去除空白、處理括號、擴充異體字庫。
 * 2. 除錯模式：在 Console 輸出未匹配到的穴位名稱。
 */

(function() {
    'use strict';

    /**
     * 座標資料表：以穴位名稱為鍵，對應座標陣列 [{x, y}, ...]。
     */
    const ACUPOINT_COORDS = {
        // ==========================================
        // 頭部與頸部 (Head & Neck)
        // ==========================================
        '百會': [
            { x: 0.8858, y: 0.9476 }, 
            { x: 0.5733, y: 0.9161 }, 
            { x: 0.4519, y: 0.9773 }
        ],
        '神庭': [
            { x: 0.8367, y: 0.9356 },
            { x: 0.1518, y: 0.9473 }
        ],
        '頭臨泣': [
            { x: 0.8472, y: 0.9308 },
            { x: 0.1645, y: 0.9467 }
        ],
        '本神': [
            { x: 0.8520, y: 0.9297 },
            { x: 0.1697, y: 0.9456 }
        ],
        '頭維': [
            { x: 0.8582, y: 0.9275 },
            { x: 0.1738, y: 0.9421 }
        ],
        '陽白': [
            { x: 0.8370, y: 0.9133 },
            { x: 0.1647, y: 0.9213 }
        ],
        '印堂': [{ x: 0.1518, y: 0.9101 }],
        '睛明': [{ x: 0.1573, y: 0.8992 }],
        '攢竹': [
            { x: 0.8313, y: 0.8985 },
            { x: 0.1576, y: 0.9089 }
        ],
        '魚腰': [], 
        '絲竹空': [
            { x: 0.8425, y: 0.9021 },
            { x: 0.1731, y: 0.9102 }
        ],
        '瞳子髎': [
            { x: 0.8425, y: 0.8906 },
            { x: 0.1729, y: 0.8987 }
        ],
        '承泣': [
            { x: 0.8364, y: 0.8821 },
            { x: 0.1649, y: 0.8923 }
        ],
        '四白': [
            { x: 0.8364, y: 0.8749 },
            { x: 0.1650, y: 0.8867 }
        ],
        '迎香': [
            { x: 0.8335, y: 0.8668 },
            { x: 0.1595, y: 0.8774 }
        ],
        '口禾髎': [
            { x: 0.8304, y: 0.8591 },
            { x: 0.1563, y: 0.8718 }
        ],
        '水溝': [
            { x: 0.8271, y: 0.8583 },
            { x: 0.1523, y: 0.8713 }
        ],
        '兌端': [
            { x: 0.8271, y: 0.8529 },
            { x: 0.1524, y: 0.8663 }
        ],
        '齦交': [{ x: 0.2492, y: 0.9074 }],
        '素髎': [
            { x: 0.8224, y: 0.8690 },
            { x: 0.1523, y: 0.8806 }
        ],
        '地倉': [
            { x: 0.8362, y: 0.8511 },
            { x: 0.1649, y: 0.8618 }
        ],
        '巨髎': [
            { x: 0.8361, y: 0.8614 },
            { x: 0.1652, y: 0.8760 }
        ],
        '顴髎': [
            { x: 0.8430, y: 0.8673 },
            { x: 0.1709, y: 0.8784 }
        ],
        '下關': [
            { x: 0.8574, y: 0.8708 },
            { x: 0.1760, y: 0.8801 }
        ],
        '頰車': [
            { x: 0.8604, y: 0.8453 },
            { x: 0.1718, y: 0.8589 }
        ],
        '大迎': [
            { x: 0.8510, y: 0.8372 },
            { x: 0.1687, y: 0.8491 }
        ],
        '承漿': [
            { x: 0.8304, y: 0.8402 },
            { x: 0.1529, y: 0.8513 }
        ],
        '廉泉': [
            { x: 0.8447, y: 0.8164 },
            { x: 0.1526, y: 0.8318 }
        ],
        '聚泉': [{ x: 0.0577, y: 0.8848 }],
        '上關': [
            { x: 0.8573, y: 0.8854 },
            { x: 0.1755, y: 0.8896 }
        ],
        '頷厭': [
            { x: 0.8604, y: 0.9203 },
            { x: 0.1778, y: 0.9326 }
        ],
        '懸顱': [{ x: 0.8634, y: 0.9118 }],
        '懸釐': [{ x: 0.8657, y: 0.9044 }],
        '曲鬢': [{ x: 0.8685, y: 0.8983 }],
        '率谷': [{ x: 0.8770, y: 0.9136 }],
        '天衝': [
            { x: 0.8825, y: 0.9140 },
            { x: 0.4826, y: 0.9430 }
        ],
        '浮白': [
            { x: 0.8873, y: 0.8978 },
            { x: 0.4785, y: 0.9246 }
        ],
        '頭竅陰': [
            { x: 0.8882, y: 0.8800 },
            { x: 0.4767, y: 0.9115 }
        ],
        '完骨': [
            { x: 0.8860, y: 0.8620 },
            { x: 0.4695, y: 0.8916 }
        ],
        '角孫': [
            { x: 0.8773, y: 0.9028 },
            { x: 0.4848, y: 0.9242 }
        ],
        '耳和髎': [{ x: 0.8654, y: 0.8932 }],
        '耳門': [{ x: 0.8673, y: 0.8858 }],
        '聽宮': [{ x: 0.8673, y: 0.8781 }],
        '聽會': [{ x: 0.8669, y: 0.8710 }],
        '翳風': [
            { x: 0.8744, y: 0.8605 },
            { x: 0.4758, y: 0.8875 }
        ],
        '顱息': [
            { x: 0.8851, y: 0.8884 },
            { x: 0.4821, y: 0.9104 }
        ],
        '瘛脈': [
            { x: 0.8828, y: 0.8703 },
            { x: 0.4788, y: 0.8973 }
        ],
        '眉衝': [
            { x: 0.8406, y: 0.9338 },
            { x: 0.1575, y: 0.9475 }
        ],
        '曲差': [
            { x: 0.8439, y: 0.9323 },
            { x: 0.1610, y: 0.9473 }
        ],
        '五處': [
            { x: 0.8460, y: 0.9363 },
            { x: 0.1612, y: 0.9524 }
        ],
        '承光': [{ x: 0.8598, y: 0.9439 }],
        '通天': [{ x: 0.8739, y: 0.9452 }],
        '絡卻': [
            { x: 0.8882, y: 0.9367 },
            { x: 0.4630, y: 0.9703 }
        ],
        '正營': [{ x: 0.8627, y: 0.9393 }],
        '目窗': [{ x: 0.8552, y: 0.9367 }],
        '承靈': [
            { x: 0.8735, y: 0.9397 },
            { x: 0.4721, y: 0.9701 }
        ],
        '腦空': [
            { x: 0.8956, y: 0.8871 },
            { x: 0.4650, y: 0.9137 }
        ],
        '風池': [
            { x: 0.8908, y: 0.8638 },
            { x: 0.4645, y: 0.8894 }
        ],
        '天柱': [
            { x: 0.8881, y: 0.8481 },
            { x: 0.4590, y: 0.8667 }
        ],
        '玉枕': [
            { x: 0.8999, y: 0.8877 },
            { x: 0.4599, y: 0.9126 }
        ],
        '上星': [
            { x: 0.8416, y: 0.9406 },
            { x: 0.1518, y: 0.9534 }
        ],
        '囟會': [{ x: 0.8525, y: 0.9478 }],
        '前頂': [{ x: 0.8688, y: 0.9526 }],
        '後頂': [{ x: 0.8981, y: 0.9315 }],
        '強間': [
            { x: 0.9052, y: 0.9094 },
            { x: 0.4519, y: 0.9353 }
        ],
        '腦戶': [
            { x: 0.9040, y: 0.8872 },
            { x: 0.4521, y: 0.9128 }
        ],
        '風府': [
            { x: 0.8962, y: 0.8620 },
            { x: 0.4525, y: 0.8910 }
        ],
        '啞門': [
            { x: 0.8929, y: 0.8539 },
            { x: 0.4525, y: 0.8790 }
        ],
        '天容': [{ x: 0.8693, y: 0.8442 }],
        '天牖': [
            { x: 0.8806, y: 0.8461 },
            { x: 0.4706, y: 0.8667 }
        ],
        '人迎': [
            { x: 0.1624, y: 0.8264 },
            { x: 0.8556, y: 0.8131 }
        ],
        '扶突': [
            { x: 0.1692, y: 0.8264 },
            { x: 0.8655, y: 0.8148 }
        ],
        '水突': [
            { x: 0.1630, y: 0.8149 },
            { x: 0.8546, y: 0.7995 }
        ],
        '天鼎': [
            { x: 0.1761, y: 0.8167 },
            { x: 0.8688, y: 0.7998 }
        ],
        '天突': [
            { x: 0.1528, y: 0.8015 },
            { x: 0.8468, y: 0.7827 }
        ],
        '缺盆': [
            { x: 0.1819, y: 0.8059 },
            { x: 0.8693, y: 0.7849 }
        ],
        '天窗': [{ x: 0.8765, y: 0.8196 }],

        // ==========================================
        // 上肢 (Upper Limb)
        // ==========================================
        '尺澤': [
            { x: 0.7580, y: 0.7591 },
            { x: 0.2408, y: 0.6391 }
        ],
        '曲澤': [
            { x: 0.7476, y: 0.7434 },
            { x: 0.2314, y: 0.6345 }
        ],
        '少海': [
            { x: 0.7377, y: 0.7300 },
            { x: 0.2192, y: 0.6301 }
        ],
        '青靈': [
            { x: 0.7560, y: 0.7239 },
            { x: 0.2175, y: 0.6677 }
        ],
        '天泉': [
            { x: 0.7996, y: 0.7324 },
            { x: 0.2225, y: 0.7173 }
        ],
        '極泉': [{ x: 0.7487, y: 0.5597 }],
        '中衝': [
            { x: 0.7551, y: 0.9727 },
            { x: 0.2867, y: 0.4193 }
        ],
        '少府': [
            { x: 0.7381, y: 0.9065 },
            { x: 0.2593, y: 0.4754 }
        ],
        '勞宮': [
            { x: 0.7517, y: 0.9065 },
            { x: 0.2745, y: 0.4776 }
        ],
        '少商': [
            { x: 0.7847, y: 0.9113 },
            { x: 0.3014, y: 0.4785 },
            { x: 0.9132, y: 0.5052 }
        ],
        '魚際': [
            { x: 0.7682, y: 0.8849 },
            { x: 0.2840, y: 0.5003 }
        ],
        '神門': [
            { x: 0.7348, y: 0.8707 },
            { x: 0.2521, y: 0.5028 }
        ],
        '陰郄': [
            { x: 0.7335, y: 0.8648 },
            { x: 0.2500, y: 0.5079 }
        ],
        '通里': [
            { x: 0.7329, y: 0.8593 },
            { x: 0.2479, y: 0.5133 }
        ],
        '靈道': [
            { x: 0.7315, y: 0.8539 },
            { x: 0.2458, y: 0.5188 }
        ],
        '大陵': [
            { x: 0.7438, y: 0.8689 },
            { x: 0.2617, y: 0.5087 }
        ],
        '太淵': [
            { x: 0.7535, y: 0.8676 },
            { x: 0.2715, y: 0.5131 }
        ],
        '經渠': [
            { x: 0.7518, y: 0.8571 },
            { x: 0.2695, y: 0.5219 }
        ],
        '列缺': [
            { x: 0.7527, y: 0.8501 },
            { x: 0.2695, y: 0.5284 }
        ],
        '內關': [
            { x: 0.7407, y: 0.8473 },
            { x: 0.2568, y: 0.5302 }
        ],
        '間使': [
            { x: 0.7401, y: 0.8356 },
            { x: 0.2541, y: 0.5404 }
        ],
        '郄門': [
            { x: 0.7384, y: 0.8163 },
            { x: 0.2489, y: 0.5618 }
        ],
        '孔最': [
            { x: 0.7506, y: 0.7988 },
            { x: 0.2527, y: 0.5850 }
        ],
        '臑會': [
            { x: 0.9316, y: 0.7508 },
            { x: 0.5317, y: 0.7287 }
        ],
        '臂臑': [
            { x: 0.9273, y: 0.7373 },
            { x: 0.5459, y: 0.7129 },
            { x: 0.9043, y: 0.7731 }
        ],
        '天府': [
            { x: 0.9079, y: 0.7104 },
            { x: 0.2311, y: 0.7088 }
        ],
        '俠白': [
            { x: 0.9136, y: 0.7034 },
            { x: 0.2329, y: 0.6987 }
        ],
        '消濼': [
            { x: 0.9572, y: 0.7196 },
            { x: 0.5340, y: 0.6812 }
        ],
        '手五里': [
            { x: 0.9513, y: 0.6953 },
            { x: 0.5501, y: 0.6548 }
        ],
        '清冷淵': [
            { x: 0.9740, y: 0.6964 },
            { x: 0.5350, y: 0.6391 }
        ],
        '肘髎': [
            { x: 0.9624, y: 0.6796 },
            { x: 0.5498, y: 0.6321 }
        ],
        '天井': [
            { x: 0.9790, y: 0.6888 },
            { x: 0.5357, y: 0.6248 }
        ],
        '曲池': [
            { x: 0.9599, y: 0.6693 },
            { x: 0.5575, y: 0.6217 }
        ],
        '陽谿': [
            { x: 0.9351, y: 0.5473 },
            { x: 0.5856, y: 0.4920 }
        ],
        '陽池': [
            { x: 0.9462, y: 0.5421 },
            { x: 0.5720, y: 0.4840 }
        ],
        '合谷': [
            { x: 0.9297, y: 0.5224 },
            { x: 0.5960, y: 0.4693 }
        ],
        '三間': [
            { x: 0.9318, y: 0.5115 },
            { x: 0.6013, y: 0.4540 }
        ],
        '二間': [
            { x: 0.9319, y: 0.4988 },
            { x: 0.6044, y: 0.4424 }
        ],
        '中渚': [
            { x: 0.9555, y: 0.5093 },
            { x: 0.5733, y: 0.4477 }
        ],
        '液門': [
            { x: 0.9557, y: 0.4962 },
            { x: 0.5756, y: 0.4359 }
        ],
        '商陽': [
            { x: 0.9283, y: 0.4652 },
            { x: 0.6142, y: 0.4086 }
        ],
        '關衝': [
            { x: 0.9453, y: 0.4591 },
            { x: 0.5883, y: 0.3979 }
        ],
        '少衝': [
            { x: 0.9533, y: 0.4682 },
            { x: 0.5798, y: 0.4103 }
        ],
        '手三里': [
            { x: 0.9566, y: 0.6481 },
            { x: 0.5620, y: 0.6026 }
        ],
        '上廉': [
            { x: 0.9549, y: 0.6379 },
            { x: 0.5637, y: 0.5900 }
        ],
        '下廉': [
            { x: 0.9533, y: 0.6289 },
            { x: 0.5660, y: 0.5780 }
        ],
        '四瀆': [
            { x: 0.9700, y: 0.6132 },
            { x: 0.5507, y: 0.5579 }
        ],
        '溫溜': [
            { x: 0.9483, y: 0.5985 },
            { x: 0.5706, y: 0.5458 }
        ],
        '三陽絡': [
            { x: 0.9560, y: 0.5830 },
            { x: 0.5592, y: 0.5290 }
        ],
        '偏歷': [
            { x: 0.9441, y: 0.5758 },
            { x: 0.5751, y: 0.5237 }
        ],
        '支溝': [
            { x: 0.9522, y: 0.5717 },
            { x: 0.5639, y: 0.5180 }
        ],
        '會宗': [
            { x: 0.9572, y: 0.5679 },
            { x: 0.5577, y: 0.5143 }
        ],
        '外關': [
            { x: 0.9501, y: 0.5599 },
            { x: 0.5664, y: 0.5078 }
        ],
        '支正': [{ x: 0.5445, y: 0.5344 }],
        '養老': [{ x: 0.5633, y: 0.4888 }],
        '陽谷': [{ x: 0.5639, y: 0.4783 }],
        '腕骨': [{ x: 0.5628, y: 0.4654 }],
        '後谿': [{ x: 0.5658, y: 0.4442 }],
        '前谷': [{ x: 0.5681, y: 0.4326 }],
        '少澤': [{ x: 0.5747, y: 0.4092 }],
        '小海': [{ x: 0.5275, y: 0.6042 }],
        '肩井': [
            { x: 0.8933, y: 0.8044 },
            { x: 0.4914, y: 0.8249 }
        ],
        '氣舍': [
            { x: 0.8537, y: 0.7853 },
            { x: 0.1634, y: 0.8044 }
        ],
        '肩髎': [
            { x: 0.9153, y: 0.7797 },
            { x: 0.5305, y: 0.7978 }
        ],
        '肩髃': [{ x: 0.2254, y: 0.7924 }],

        // ==========================================
        // 胸、腹、背部 (Trunk)
        // ==========================================
        '天谿': [
            { x: 0.8514, y: 0.7104 },
            { x: 0.1989, y: 0.7336 }
        ],
        '璇璣': [
            { x: 0.8422, y: 0.7731 },
            { x: 0.1528, y: 0.7915 }
        ],
        '神藏': [
            { x: 0.8376, y: 0.7419 },
            { x: 0.1692, y: 0.7588 }
        ],
        '屋翳': [
            { x: 0.8471, y: 0.7419 },
            { x: 0.1849, y: 0.7610 }
        ],
        '周榮': [
            { x: 0.8624, y: 0.7401 },
            { x: 0.1979, y: 0.7673 }
        ],
        '玉堂': [
            { x: 0.8245, y: 0.7272 },
            { x: 0.1531, y: 0.7423 }
        ],
        '靈墟': [
            { x: 0.8317, y: 0.7270 },
            { x: 0.1692, y: 0.7429 }
        ],
        '膺窗': [
            { x: 0.8404, y: 0.7261 },
            { x: 0.1855, y: 0.7451 }
        ],
        '胸鄉': [
            { x: 0.8558, y: 0.7253 },
            { x: 0.1983, y: 0.7504 }
        ],
        '膻中': [
            { x: 0.8196, y: 0.7106 },
            { x: 0.1531, y: 0.7268 }
        ],
        '神封': [
            { x: 0.8266, y: 0.7104 },
            { x: 0.1694, y: 0.7268 }
        ],
        '乳中': [
            { x: 0.8355, y: 0.7084 },
            { x: 0.1857, y: 0.7269 }
        ],
        '天池': [
            { x: 0.8436, y: 0.7095 },
            { x: 0.1929, y: 0.7305 }
        ],
        '俞府': [
            { x: 0.8520, y: 0.7733 },
            { x: 0.1684, y: 0.7910 }
        ],
        '氣戶': [
            { x: 0.8624, y: 0.7733 },
            { x: 0.1822, y: 0.7944 }
        ],
        '雲門': [
            { x: 0.8761, y: 0.7727 },
            { x: 0.1965, y: 0.8006 }
        ],
        '華蓋': [
            { x: 0.8368, y: 0.7576 },
            { x: 0.1529, y: 0.7756 }
        ],
        '彧中': [
            { x: 0.8436, y: 0.7576 },
            { x: 0.1686, y: 0.7756 }
        ],
        '庫房': [
            { x: 0.8553, y: 0.7576 },
            { x: 0.1836, y: 0.7774 }
        ],
        '中府': [
            { x: 0.8681, y: 0.7565 },
            { x: 0.1968, y: 0.7839 }
        ],
        '紫宮': [
            { x: 0.8305, y: 0.7421 },
            { x: 0.1529, y: 0.7593 }
        ],
        '長強': [
            { x: 0.5712, y: 0.1945 },
            { x: 0.4533, y: 0.4901 }
        ],
        '氣衝': [
            { x: 0.8268, y: 0.5011 }, // 側腹
            { x: 0.1671, y: 0.5278 }  // 腹股溝
        ],
        '居髎': [{ x: 0.8546, y: 0.5081 }],
        '環跳': [
            { x: 0.8792, y: 0.4902 }, // 側腹/臀
            { x: 0.5020, y: 0.5034 }  // 背部/臀
        ],
        '輒筋': [{ x: 0.8819, y: 0.7020 }],
        '淵腋': [{ x: 0.8905, y: 0.7055 }],
        '大包': [{ x: 0.8870, y: 0.6819 }],
        '中庭': [
            { x: 0.8170, y: 0.6924 },
            { x: 0.1531, y: 0.7112 }
        ],
        '步廊': [
            { x: 0.8230, y: 0.6918 },
            { x: 0.1694, y: 0.7109 }
        ],
        '乳根': [
            { x: 0.8346, y: 0.6883 },
            { x: 0.1854, y: 0.7120 }
        ],
        '食竇': [
            { x: 0.8483, y: 0.6922 },
            { x: 0.1997, y: 0.7168 }
        ],
        '鳩尾': [
            { x: 0.8155, y: 0.6784 },
            { x: 0.1533, y: 0.6983 }
        ],
        '巨闕': [
            { x: 0.8145, y: 0.6656 },
            { x: 0.1533, y: 0.6846 }
        ],
        '幽門': [
            { x: 0.8178, y: 0.6660 },
            { x: 0.1571, y: 0.6843 }
        ],
        '不容': [
            { x: 0.8236, y: 0.6662 },
            { x: 0.1683, y: 0.6844 }
        ],
        '期門': [
            { x: 0.8344, y: 0.6664 },
            { x: 0.1855, y: 0.6942 }
        ],
        '上脘': [
            { x: 0.8125, y: 0.6527 },
            { x: 0.1531, y: 0.6707 }
        ],
        '腹通谷': [
            { x: 0.8164, y: 0.6527 },
            { x: 0.1571, y: 0.6704 }
        ],
        '承滿': [
            { x: 0.8232, y: 0.6523 },
            { x: 0.1681, y: 0.6707 }
        ],
        '日月': [{ x: 0.8344, y: 0.6525 }],
        '中脘': [
            { x: 0.8120, y: 0.6387 },
            { x: 0.1529, y: 0.6567 }
        ],
        '陰都': [
            { x: 0.8149, y: 0.6394 },
            { x: 0.1571, y: 0.6563 }
        ],
        '梁門': [
            { x: 0.8229, y: 0.6389 },
            { x: 0.1680, y: 0.6570 }
        ],
        '建里': [
            { x: 0.8116, y: 0.6252 },
            { x: 0.1529, y: 0.6436 }
        ],
        '石關': [
            { x: 0.8148, y: 0.6254 },
            { x: 0.1570, y: 0.6431 }
        ],
        '關門': [
            { x: 0.8229, y: 0.6265 },
            { x: 0.1680, y: 0.6437 }
        ],
        '腹哀': [
            { x: 0.8344, y: 0.6267 },
            { x: 0.1836, y: 0.6426 }
        ],
        '下脘': [
            { x: 0.8107, y: 0.6112 },
            { x: 0.1528, y: 0.6299 }
        ],
        '商曲': [
            { x: 0.8143, y: 0.6112 },
            { x: 0.1570, y: 0.6296 }
        ],
        '太乙': [
            { x: 0.82
